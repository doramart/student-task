"use strict";(self["webpackChunk_student_task_client"]=self["webpackChunk_student_task_client"]||[]).push([[328],{4328:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});e(5639);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"accept-invitation-page"},[s("div",{staticClass:"invitation-card"},[s("div",{staticClass:"card-header"},[s("van-icon",{attrs:{name:"certificate",size:"60",color:"#667eea"}}),s("h1",[t._v("子账户邀请")])],1),t.processing||t.result?t._e():s("div",{staticClass:"card-content"},[s("h2",[t._v("您收到了一份邀请")]),s("p",{staticClass:"invitation-desc"},[t._v(" 有人邀请您成为任务管理系统的子账户。作为子账户，您将享有与主账户相同的权限，包括查看和管理所有共享任务。 ")]),s("div",{staticClass:"invitation-actions"},[s("van-button",{attrs:{type:"primary",size:"large",block:"",loading:t.accepting},on:{click:t.handleAcceptInvitation}},[t._v(" 接受邀请 ")]),s("van-button",{staticClass:"decline-btn",attrs:{size:"large",block:""},on:{click:t.handleDeclineInvitation}},[t._v(" 拒绝邀请 ")])],1)]),t.processing?s("div",{staticClass:"card-content"},[s("van-loading",{attrs:{size:"50",vertical:""}},[t._v("处理中...")])],1):t._e(),t.result?s("div",{staticClass:"card-content"},[s("div",{staticClass:"result-content",class:t.result.type},[s("van-icon",{attrs:{name:"success"===t.result.type?"checked":"close",size:"60",color:"success"===t.result.type?"#07c160":"#ee0a24"}}),s("h2",[t._v(t._s(t.result.title))]),s("p",[t._v(t._s(t.result.message))]),"success"===t.result.type?s("van-button",{attrs:{type:"primary",size:"large"},on:{click:t.goToLogin}},[t._v(" 去登录 ")]):s("van-button",{attrs:{size:"large"},on:{click:function(s){return t.$router.push("/")}}},[t._v(" 返回首页 ")])],1)]):t._e()])])},n=[],a=e(7939),c={name:"AcceptInvitation",data(){return{processing:!0,accepting:!1,result:null,inviteToken:""}},async created(){this.inviteToken=this.$route.query.token,this.inviteToken?this.processing=!1:this.showError("邀请链接无效","缺少必要的邀请参数")},methods:{async handleAcceptInvitation(){if(this.inviteToken)try{this.accepting=!0;await a.Ay.post("/user/accept-invitation",{token:this.inviteToken});this.showSuccess("邀请接受成功！","您已成为子账户，现在可以使用您的邮箱登录系统。")}catch(t){console.error("接受邀请失败:",t);const s=t.response?.data?.message||"接受邀请失败，请稍后重试";this.showError("邀请接受失败",s)}finally{this.accepting=!1}else this.$toast.fail("邀请链接无效")},handleDeclineInvitation(){this.$dialog.confirm({title:"确认拒绝",message:"确定要拒绝这个邀请吗？拒绝后将无法再次接受。"}).then(()=>{this.showError("已拒绝邀请","您已拒绝成为子账户的邀请。")}).catch(()=>{})},showSuccess(t,s){this.result={type:"success",title:t,message:s}},showError(t,s){this.result={type:"error",title:t,message:s}},goToLogin(){this.$router.push("/login")}}},r=c,o=e(5229),l=(0,o.A)(r,i,n,!1,null,"e5556dbe",null),u=l.exports}}]);